<%  Card.all.each do | card | %> 
  <% unless is_basic_land?(card) %>
    <div>
      <h1> <%= card.name %> </h1>
      <h3> Edition: <%= link_to("#{card.edition}", "#{card.edition}") %> <%= image_tag "editions/#{card.edition.downcase}", class: "edition_#{card.rarity.downcase}", height: '2%', width: '2%' %> </h3>
      <h4> Artist: <%= link_to "#{card.artist}", "#{card.artist}" %> </h4>
      
      <% unless card.card_type == "Land" %>
        <h5> Mana: 
          <% card.mana.each do | color | %>
            <%= link_to ( image_tag "mana_symbols/#{color_to_mana(color)}", size: "22" ), mana_color(color) %>
          <% end %>
        </h5>
      <% end %>

      <% if card.flavor_text %>
        <div class="col-sm-3", id = "flavor"> 
          <%= card.flavor_text %> 
        </div>
        <br> 
        <br> 
      <% end %>
    
      <br>
      <br>
      <%= link_to ( image_tag(card.img_url, class: 'card_img')  ), card_path(card) %>   
      <br>
      <br>
    </div>
  <% end %>
<% end %>

<script>
  //awful, hacky script to get mouseover to change images. temporary. (yes, `edition` is a global variable.)
  $(".edition_rare").on('mouseenter', function() {
    edition = (this.src.match(/(?<=\/editions\/).*(?=\-)/) || this.src.match(/(?<=\/editions\/).*(?=\.)/))[0]
    const src = `/assets/editions/${edition} rare.png`

    this.src = src
  }).on('mouseleave', function() {
    this.src = `/assets/editions/${edition}.png`
  });
</script>

<script>
  $(".edition_uncommon").on('mouseenter', function() {
    edition = (this.src.match(/(?<=\/editions\/).*(?=\-)/) || this.src.match(/(?<=\/editions\/).*(?=\.)/))[0]
    const src = `/assets/editions/${edition} uncommon.png`

    this.src = src
  }).on('mouseleave', function() {
    this.src = `/assets/editions/${edition}.png`
  });
</script>